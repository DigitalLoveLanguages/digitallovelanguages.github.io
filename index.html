<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="base.css">
    <link rel="stylesheet" type="text/css" href="homepage.css">
  </head>
  <body class="home">
    <h1>Digital Love Languages Webzine</h1>

    <p>What if all the software we used was made by people who love us?
      <br>
    </p>


    <a class="fullwidth" href="lovelanguages.melaniehoff.com/">About Digital Love Languages</a>
    <br><br>

    <h4>Liberatory Learning Environments:</h4>
    <div id="orientation-blocks">
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      let orientation = [];
      const orientationWrapper = document.getElementById("orientation-blocks");

      const axiosArena = axios.create({
        baseURL: "https://api.are.na/v2/",
      });

      let loading = document.createElement("div");
      loading.className = "loading";
      loading.innerHTML = 'loading...';
      orientationWrapper.appendChild(loading);

      axiosArena.defaults.headers.Authorization = 'Bearer ---' ;
      axiosArena.get("channels/love-letters-to-a-speculative-liberatory-learning-environment-tuesday?per=100").then(response => {
        console.log(response);
        if (response.data && response.data.contents.length > 1) {
          orientationWrapper.removeChild(loading);
          createOrientation(response.data.contents);
        } else {

        }
      });

      function createOrientation(orientationData) {
        for (let i=0; i<orientationData.length; i++) {
          //create block
          let block = document.createElement("div");
          block.className = "block";

          if (orientationData[i].source) {
            block = document.createElement("a");
            block.className = "block";
            block.href = orientationData[i].source.url;
            block.target = "_blank";
          }

          if (orientationData[i].class === "Channel") {
            block = document.createElement("a");
            block.className = "channel";
            block.href = `https://are.na/${orientationData[i].user.slug}/${orientationData[i].slug}`;
            block.target = "_blank";
          }

          //create image
          if (orientationData[i].image && orientationData[i].image) {
            const image = document.createElement("img");
            image.className = "image";
            image.src = orientationData[i].image.square.url;
            block.appendChild(image);
          }
          //create title
          if (orientationData[i].title) {
            const title = document.createElement("div");
            title.className = "title";
            title.innerHTML = orientationData[i].title;
            block.appendChild(title);
          }

          //create text
          if (orientationData[i].class === "Text") {
            const text = document.createElement("div");
            text.className = "text";
            text.innerHTML = orientationData[i].content;
            block.appendChild(text);
          }

          orientationWrapper.appendChild(block);
        }
      }
    </script>
  </body>
</html>
